# IF change Rule generator for REVAD

Generate IF statement change rules from pull request for Java

## Algorithm

Rule generator uses [association rule mining algorithm](https://en.wikipedia.org/wiki/Association_rule_learning)

## Rule example

* LHS:
* RHS:
* Ori:
* Rev:
* Count:
* Support:
* All)num:
* Confidence:
* LHS_Count:
* Lift:
* Link:
* Pull Link:

## Environment

### OS

Executed on Mac OS(10.13.1)

* Python3

Need `PyGitHub`

```sh
pip3 install PyGithub
```

* R
  * package:apriori

```sh
R
> install.packages('arules')
```

## Usage

### Arguments

As the follow is used arguments in Rule generator

* apiurl: URL of GitHub or GitHub Enterprise API(e.g. <https://api.github.com> or <http(s)://hostname/api/v3>)
* user: GitHub user Id to access the GitHub
* password: GitHub user password
* owner: Project owner Id (if you want to collect PR on <https://github.com/octocat/Hello-World> owner is octocat)
* project: Project name (e.g. Hello-World)
* pulls_file: Pull file that generated by `RequestPullList.py` (usually: `project`-pulls.json)
* outdir: Patch file directory (In this document: `outdir`)

### Clone this repository

```sh
git clone https://github.com/Ikuyadeu/ChangeRuleGenerator.git
cd ChangeRuleGenerator
```

### Collect pull requests and changes data (Python)

* Collect pull requests

```sh
python3 python/RequestPullList.py apiurl user password owner project
```

* Collect patch data

```sh
mkdir outdir
python3 python/GetPatch.py pulls_file outdir user password
```

* Extract changed symbol

```sh
python3 python/ExtractChangedSymbols.py outdir
```

### Generate rule(R)

* Run R terminal

```sh
R
```

* Integrate data

```R
> source("r/merge.r", encoding = "UTF-8")
```

* Generate rule by association mining

```R
> source("r/associate.r", encoding = "UTF-8")
```

### Generate Example from each rule

Quit the R session

```sh
python3 python/example_from_rules.py proto_rule.csv git_merged.csv rules.csv
```